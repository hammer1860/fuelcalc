<!DOCTYPE html>
<html>
<head>
  <title>Meine Webseite</title>
  <style>
    /* Reset für die Standardstile */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Allgemeine Stile für den Seiteninhalt */
body {
  font-family: Arial, sans-serif;
  background-color: #f2f2f2;
  padding: 20px;
}

.container {
  max-width: 960px;
  margin: 0 auto;
}

h1 {
  font-size: 24px;
  margin-bottom: 20px;
}

h2 {
  font-size: 18px;
  margin-bottom: 10px;
}

form {
  margin-bottom: 20px;
}

input[type="text"],
input[type="number"] {
  padding: 8px;
  width: 200px;
  border: 1px solid #ccc;
  border-radius: 4px;
  margin-right: 10px;
}

input[type="number"] {
  width: 100px;
}

button {
  padding: 8px 16px;
  background-color: #0C0F50;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #45a049;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

th,
td {
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

th {
  background-color: #4CAF50;
  color: #fff;
}

.markiert {
  color: red;
  font-weight: bold;
}

.fuel-ergebnis {
  font-weight: bold;
  font-size: 18px;
}

.result-container {
  margin-top: 20px;
  background-color: #fff;
  padding: 20px;
}

/* Medienabfragen für responsive Darstellung */
@media (max-width: 600px) {
  input[type="text"],
  input[type="number"] {
    width: 100%;
    margin-bottom: 10px;
  }

  button {
    width: 100%;
  }
}

  </style>
</head>
<body>
  <h1>fuel calculator for iracing</h1>
  
  <form>
    <label for="rundenzeit">average lap time of leader:</label>
    <input type="text" id="rundenzeit" name="rundenzeit" placeholder="format: 01:10.500">
    <button type="button" onclick="erhoeheRundenzeit()">+ 0.5s</button>
    <button type="button" onclick="verringereRundenzeit()">- 0.5s</button>
    <p id="rundenzeit-in-sekunden"></p>
    
    <label for="verbrauch">average consumption:</label>
    <input type="text" id="verbrauch" name="verbrauch" placeholder="format: 2,15">
    
    <br/>
    <br/>
    <br/>

    <h2>timed race</h2>
    
    <table>
      <tr>
        <th></th>
        <th></th>
        <th></th>
        <th>predicted laps</th>
        <th>fuel</th>
      </tr>
      <tr>
        <td><input type="text" id="renndauer1" name="renndauer1" placeholder="race time in minutes"></td>
        <td><span id="ergebnis1"></span></td>
        <td>&rarr;</td>
        <td><span id="aufgerundeteRunden1"></span></td>
        <td><span id="fuel1" class="fuel-ergebnis"></span> <span id="fuel1-zusatz" class="fuel-ergebnis"></span></td>
      </tr>
      <tr>
        <td><input type="text" id="renndauer2" name="renndauer2" placeholder="race time in minutes"></td>
        <td><span id="ergebnis2"></span></td>
        <td>&rarr;</td>
        <td><span id="aufgerundeteRunden2"></span></td>
        <td><span id="fuel2" class="fuel-ergebnis"></span> <span id="fuel2-zusatz" class="fuel-ergebnis"></span></td>
      </tr>
      <tr>
        <td><input type="text" id="renndauer3" name="renndauer3" placeholder="race time in minutes"></td>
        <td><span id="ergebnis3"></span></td>
        <td>&rarr;</td>
        <td><span id="aufgerundeteRunden3"></span></td>
        <td><span id="fuel3" class="fuel-ergebnis"></span> <span id="fuel3-zusatz" class="fuel-ergebnis"></span></td>
      </tr>
      <tr>
        <td><input type="text" id="renndauer4" name="renndauer4" placeholder="race time in minutes"></td>
        <td><span id="ergebnis4"></span></td>
        <td>&rarr;</td>
        <td><span id="aufgerundeteRunden4"></span></td>
        <td><span id="fuel4" class="fuel-ergebnis"></span> <span id="fuel4-zusatz" class="fuel-ergebnis"></span></td>
      </tr>
      <tr>
        <td><input type="text" id="renndauer5" name="renndauer5" placeholder="race time in minutes"></td>
        <td><span id="ergebnis5"></span></td>
        <td>&rarr;</td>
        <td><span id="aufgerundeteRunden5"></span></td>
        <td><span id="fuel5" class="fuel-ergebnis"></span> <span id="fuel5-zusatz" class="fuel-ergebnis"></span></td>
      </tr>
    </table>
    
    <button type="button" onclick="berechnen()">calculate</button>
    
    <br/>
    <br/>
    <br/>

    <h2>set amount of laps</h2>

<table>
  <tr>
    <th></th>
    <th>fuel</th>
    <th>race time (hh:mm:ss)</th>
  </tr>
  <tr>
    <td><input type="number" id="setLaps1" name="setLaps1" placeholder="Ganzzahlige Rundenanzahl"></td>
    <td><span id="setFuel1" class="fuel-ergebnis"></span></td>
    <td><span id="setRaceTime1"></span></td>
  </tr>
  <tr>
    <td><input type="number" id="setLaps2" name="setLaps2" placeholder="Ganzzahlige Rundenanzahl"></td>
    <td><span id="setFuel2" class="fuel-ergebnis"></span></td>
    <td><span id="setRaceTime2"></span></td>
  </tr>
  <tr>
    <td><input type="number" id="setLaps3" name="setLaps3" placeholder="Ganzzahlige Rundenanzahl"></td>
    <td><span id="setFuel3" class="fuel-ergebnis"></span></td>
    <td><span id="setRaceTime3"></span></td>
  </tr>
  <tr>
    <td><input type="number" id="setLaps4" name="setLaps4" placeholder="Ganzzahlige Rundenanzahl"></td>
    <td><span id="setFuel4" class="fuel-ergebnis"></span></td>
    <td><span id="setRaceTime4"></span></td>
  </tr>
  <tr>
    <td><input type="number" id="setLaps5" name="setLaps5" placeholder="Ganzzahlige Rundenanzahl"></td>
    <td><span id="setFuel5" class="fuel-ergebnis"></span></td>
    <td><span id="setRaceTime5"></span></td>
  </tr>
</table>

<button type="button" onclick="berechnen()">calculate</button>


  </form>
  
  <div id="ergebnis"></div>

  <script>
    function erhoeheRundenzeit() {
      var rundenzeitInput = document.getElementById('rundenzeit').value;
      if (rundenzeitInput) {
        var rundenzeit = umwandelnInSekunden(rundenzeitInput);
        rundenzeit += 0.5;
        document.getElementById('rundenzeit').value = formatiereRundenzeit(rundenzeit);
        berechnen();
      }
    }
    
    function verringereRundenzeit() {
      var rundenzeitInput = document.getElementById('rundenzeit').value;
      if (rundenzeitInput) {
        var rundenzeit = umwandelnInSekunden(rundenzeitInput);
        rundenzeit -= 0.5;
        document.getElementById('rundenzeit').value = formatiereRundenzeit(rundenzeit);
        berechnen();
      }
    }
    
    function formatiereRundenzeit(rundenzeit) {
      var minuten = Math.floor(rundenzeit / 60);
      var sekunden = Math.floor(rundenzeit % 60);
      var millisekunden = Math.round((rundenzeit % 1) * 1000);
      return ('0' + minuten).slice(-2) + ':' + ('0' + sekunden).slice(-2) + '.' + ('00' + millisekunden).slice(-3);
    }
    
    function berechnen() {
      var rundenzeitInput = document.getElementById('rundenzeit').value;
      var rundenzeit = umwandelnInSekunden(rundenzeitInput);
      
      // Verbrauch mit Komma oder Punkt akzeptieren
      var verbrauchInput = document.getElementById('verbrauch').value;
      var verbrauch = parseFloat(verbrauchInput.replace(',', '.')); // Komma durch Punkt ersetzen
      
      

      var renndauer1 = parseFloat(document.getElementById('renndauer1').value);
      var renndauer2 = parseFloat(document.getElementById('renndauer2').value);
      var renndauer3 = parseFloat(document.getElementById('renndauer3').value);
      var renndauer4 = parseFloat(document.getElementById('renndauer4').value);
      var renndauer5 = parseFloat(document.getElementById('renndauer5').value);
      
      var ergebnis1 = berechneErgebnis(renndauer1, rundenzeit);
      var ergebnis2 = berechneErgebnis(renndauer2, rundenzeit);
      var ergebnis3 = berechneErgebnis(renndauer3, rundenzeit);
      var ergebnis4 = berechneErgebnis(renndauer4, rundenzeit);
      var ergebnis5 = berechneErgebnis(renndauer5, rundenzeit);
      
      document.getElementById('ergebnis1').textContent = ergebnis1.toFixed(2);
      document.getElementById('ergebnis2').textContent = ergebnis2.toFixed(2);
      document.getElementById('ergebnis3').textContent = ergebnis3.toFixed(2);
      document.getElementById('ergebnis4').textContent = ergebnis4.toFixed(2);
      document.getElementById('ergebnis5').textContent = ergebnis5.toFixed(2);
      
      var aufgerundeteRunden1 = Math.ceil(ergebnis1);
      var aufgerundeteRunden2 = Math.ceil(ergebnis2);
      var aufgerundeteRunden3 = Math.ceil(ergebnis3);
      var aufgerundeteRunden4 = Math.ceil(ergebnis4);
      var aufgerundeteRunden5 = Math.ceil(ergebnis5);
      
      document.getElementById('aufgerundeteRunden1').textContent = aufgerundeteRunden1;
      document.getElementById('aufgerundeteRunden2').textContent = aufgerundeteRunden2;
      document.getElementById('aufgerundeteRunden3').textContent = aufgerundeteRunden3;
      document.getElementById('aufgerundeteRunden4').textContent = aufgerundeteRunden4;
      document.getElementById('aufgerundeteRunden5').textContent = aufgerundeteRunden5;
      
      var fuel1 = Math.ceil((aufgerundeteRunden1 * verbrauch) + 0.5);
      var fuel2 = Math.ceil((aufgerundeteRunden2 * verbrauch) + 0.5);
      var fuel3 = Math.ceil((aufgerundeteRunden3 * verbrauch) + 0.5);
      var fuel4 = Math.ceil((aufgerundeteRunden4 * verbrauch) + 0.5);
      var fuel5 = Math.ceil((aufgerundeteRunden5 * verbrauch) + 0.5);
      
      document.getElementById('fuel1').textContent = fuel1;
      document.getElementById('fuel2').textContent = fuel2;
      document.getElementById('fuel3').textContent = fuel3;
      document.getElementById('fuel4').textContent = fuel4;
      document.getElementById('fuel5').textContent = fuel5;
      
      var predictedLaps1 = aufgerundeteRunden1;
      var predictedLaps2 = aufgerundeteRunden2;
      var predictedLaps3 = aufgerundeteRunden3;
      var predictedLaps4 = aufgerundeteRunden4;
      var predictedLaps5 = aufgerundeteRunden5;

      if ((aufgerundeteRunden1 - ergebnis1) < 0.1) {
        predictedLaps1 += ' (' + (aufgerundeteRunden1 + 1) + ')';
      }

      if ((aufgerundeteRunden2 - ergebnis2) < 0.1) {
        predictedLaps2 += ' (' + (aufgerundeteRunden2 + 1) + ')';
      }

      if ((aufgerundeteRunden3 - ergebnis3) < 0.1) {
        predictedLaps3 += ' (' + (aufgerundeteRunden3 + 1) + ')';
      }

      if ((aufgerundeteRunden4 - ergebnis4) < 0.1) {
        predictedLaps4 += ' (' + (aufgerundeteRunden4 + 1) + ')';
      }

      if ((aufgerundeteRunden5 - ergebnis5) < 0.1) {
        predictedLaps5 += ' (' + (aufgerundeteRunden5 + 1) + ')';
      }

  document.getElementById('aufgerundeteRunden1').textContent = predictedLaps1;
  document.getElementById('aufgerundeteRunden2').textContent = predictedLaps2;
  document.getElementById('aufgerundeteRunden3').textContent = predictedLaps3;
  document.getElementById('aufgerundeteRunden4').textContent = predictedLaps4;
  document.getElementById('aufgerundeteRunden5').textContent = predictedLaps5;


      var fuel1Zusatz = (aufgerundeteRunden1 - ergebnis1) < 0.1 ? '(' + Math.ceil(((aufgerundeteRunden1 + 1) * verbrauch) + 0.5) + ')' + ' Race may get an extra lap. Use fuel in brackets to be safe.' : '';
      var fuel2Zusatz = (aufgerundeteRunden2 - ergebnis2) < 0.1 ? '(' + Math.ceil(((aufgerundeteRunden2 + 1) * verbrauch) + 0.5) + ')' + ' Race may get an extra lap. Use fuel in brackets to be safe.' : '';
      var fuel3Zusatz = (aufgerundeteRunden3 - ergebnis3) < 0.1 ? '(' + Math.ceil(((aufgerundeteRunden3 + 1) * verbrauch) + 0.5) + ')' + ' Race may get an extra lap. Use fuel in brackets to be safe.' : '';
      var fuel4Zusatz = (aufgerundeteRunden4 - ergebnis4) < 0.1 ? '(' + Math.ceil(((aufgerundeteRunden4 + 1) * verbrauch) + 0.5) + ')' + ' Race may get an extra lap. Use fuel in brackets to be safe.' : '';
      var fuel5Zusatz = (aufgerundeteRunden5 - ergebnis5) < 0.1 ? '(' + Math.ceil(((aufgerundeteRunden5 + 1) * verbrauch) + 0.5) + ')' + ' Race may get an extra lap. Use fuel in brackets to be safe.' : '';
      
      document.getElementById('fuel1-zusatz').textContent = fuel1Zusatz;
      document.getElementById('fuel2-zusatz').textContent = fuel2Zusatz;
      document.getElementById('fuel3-zusatz').textContent = fuel3Zusatz;
      document.getElementById('fuel4-zusatz').textContent = fuel4Zusatz;
      document.getElementById('fuel5-zusatz').textContent = fuel5Zusatz;
      
      markiereRunden();
      
      var setLaps1 = parseInt(document.getElementById('setLaps1').value);
      var setLaps2 = parseInt(document.getElementById('setLaps2').value);
      var setLaps3 = parseInt(document.getElementById('setLaps3').value);
      var setLaps4 = parseInt(document.getElementById('setLaps4').value);
      var setLaps5 = parseInt(document.getElementById('setLaps5').value);
      
      document.getElementById('setFuel1').textContent = Math.ceil((setLaps1 * verbrauch) + 0.5);
      document.getElementById('setFuel2').textContent = Math.ceil((setLaps2 * verbrauch) + 0.5);
      document.getElementById('setFuel3').textContent = Math.ceil((setLaps3 * verbrauch) + 0.5);
      document.getElementById('setFuel4').textContent = Math.ceil((setLaps4 * verbrauch) + 0.5);
      document.getElementById('setFuel5').textContent = Math.ceil((setLaps5 * verbrauch) + 0.5);

      document.getElementById('setRaceTime1').textContent = berechneRacetime(setLaps1, rundenzeit);
      document.getElementById('setRaceTime2').textContent = berechneRacetime(setLaps2, rundenzeit);
      document.getElementById('setRaceTime3').textContent = berechneRacetime(setLaps3, rundenzeit);
      document.getElementById('setRaceTime4').textContent = berechneRacetime(setLaps4, rundenzeit);
      document.getElementById('setRaceTime5').textContent = berechneRacetime(setLaps5, rundenzeit);
    }
    
    function umwandelnInSekunden(rundenzeitInput) {
      var parts = rundenzeitInput.split(':');
      var minuten = parseInt(parts[0]);
      var sekundenMillisekunden = parts[1].split('.');
      var sekunden = parseInt(sekundenMillisekunden[0]);
      var millisekunden = parseInt(sekundenMillisekunden[1]);
      return minuten * 60 + sekunden + millisekunden / 1000;
    }
    
    function berechneErgebnis(renndauer, rundenzeit) {
      return renndauer * 60 / rundenzeit;
    }
    
    function berechneRacetime(setLaps, rundenzeit) {
      var racetimeInSeconds = setLaps * rundenzeit;
      var hours = Math.floor(racetimeInSeconds / 3600);
      var minutes = Math.floor((racetimeInSeconds % 3600) / 60);
      var seconds = Math.floor(racetimeInSeconds % 60);
      return ('0' + hours).slice(-2) + ':' + ('0' + minutes).slice(-2) + ':' + ('0' + seconds).slice(-2);
    }

    function markiereRunden() {
      var aufgerundeteRunden1 = parseFloat(document.getElementById('aufgerundeteRunden1').textContent);
      var aufgerundeteRunden2 = parseFloat(document.getElementById('aufgerundeteRunden2').textContent);
      var aufgerundeteRunden3 = parseFloat(document.getElementById('aufgerundeteRunden3').textContent);
      var aufgerundeteRunden4 = parseFloat(document.getElementById('aufgerundeteRunden4').textContent);
      var aufgerundeteRunden5 = parseFloat(document.getElementById('aufgerundeteRunden5').textContent);
      
      var runden1 = parseFloat(document.getElementById('ergebnis1').textContent);
      var runden2 = parseFloat(document.getElementById('ergebnis2').textContent);
      var runden3 = parseFloat(document.getElementById('ergebnis3').textContent);
      var runden4 = parseFloat(document.getElementById('ergebnis4').textContent);
      var runden5 = parseFloat(document.getElementById('ergebnis5').textContent);
      
      if (Math.abs(aufgerundeteRunden1 - runden1) < 0.1) {
        document.getElementById('aufgerundeteRunden1').classList.add('markiert');
      } else {
        document.getElementById('aufgerundeteRunden1').classList.remove('markiert');
      }
      
      if (Math.abs(aufgerundeteRunden2 - runden2) < 0.1) {
        document.getElementById('aufgerundeteRunden2').classList.add('markiert');
      } else {
        document.getElementById('aufgerundeteRunden2').classList.remove('markiert');
      }
      
      if (Math.abs(aufgerundeteRunden3 - runden3) < 0.1) {
        document.getElementById('aufgerundeteRunden3').classList.add('markiert');
      } else {
        document.getElementById('aufgerundeteRunden3').classList.remove('markiert');
      }
      
      if (Math.abs(aufgerundeteRunden4 - runden4) < 0.1) {
        document.getElementById('aufgerundeteRunden4').classList.add('markiert');
      } else {
        document.getElementById('aufgerundeteRunden4').classList.remove('markiert');
      }
      
      if (Math.abs(aufgerundeteRunden5 - runden5) < 0.1) {
        document.getElementById('aufgerundeteRunden5').classList.add('markiert');
      } else {
        document.getElementById('aufgerundeteRunden5').classList.remove('markiert');
      }
    }
  </script>
</body>
</html>
